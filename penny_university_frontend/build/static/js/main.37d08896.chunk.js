(this.webpackJsonppenny_university_frontend=this.webpackJsonppenny_university_frontend||[]).push([[0],{107:function(e,t,n){e.exports=n(257)},117:function(e,t,n){},127:function(e,t,n){},243:function(e,t,n){},257:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getToken",(function(){return C})),n.d(a,"getAuthed",(function(){return _})),n.d(a,"getUser",(function(){return w}));var r={};n.r(r),n.d(r,"getChats",(function(){return k})),n.d(r,"getFollowUps",(function(){return L})),n.d(r,"getUsers",(function(){return j})),n.d(r,"getUserByID",(function(){return T}));var o={};n.r(o),n.d(o,"getChatByID",(function(){return F})),n.d(o,"getFollowupsForChatID",(function(){return P}));var i={};n.r(i),n.d(i,"isFetchingChats",(function(){return R})),n.d(i,"getChatsPagination",(function(){return D}));var c=n(0),l=n.n(c),s=n(21),u=n.n(s),d=n(14),m=n(9),p=n(15),f=n(29),E=n(27),h=n(8),v=n(30),y=n.n(v),g=n(39),b=n(47),O=n(44),S=n(45),U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:NaN,firstName:"",lastName:"",url:""};Object(O.a)(this,e),this.id=void 0,this.firstName=void 0,this.lastName=void 0,this.url=void 0,this.email=void 0,this.id=t.id||t.pk||NaN,this.firstName=t.firstName,this.lastName=t.lastName,this.email=t.email,this.url=t.url}return Object(S.a)(e,[{key:"displayName",get:function(){return this.firstName||this.lastName?this.firstName&&this.lastName?"".concat(this.firstName," ").concat(this.lastName):this.firstName:"Anonymous"}},{key:"valid",get:function(){return!Number.isNaN(this.id)}}]),e}(),N=function(e){return e.user},C=function(e){return N(e).token},_=function(e){return!!N(e).user},w=function(e){return N(e).user||new U},k=function(e){return e.entities.chats},L=function(e){return e.entities.followUps},j=function(e){return e.entities.users},T=function(e,t){return j(e)[t]},A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:NaN,title:"",date:"",description:"",followups:"",url:"",participants:[]};Object(O.a)(this,e),this.id=void 0,this.title=void 0,this.date=void 0,this.description=void 0,this.followups=void 0,this.url=void 0,this.participants=void 0,this.id=t.id,this.title=t.title,this.date=t.date,this.description=t.description,this.followups=t.followups,this.url=t.url,this.participants=t.participants}return Object(S.a)(e,[{key:"getUserRole",value:function(e){return(this.participants.find((function(t){return t.user.toString()===e.toString()}))||{role:""}).role}},{key:"isOrganizer",value:function(e){return"Organizer"===this.getUserRole(e)}},{key:"valid",get:function(){return!Number.isNaN(this.id)}}]),e}(),F=function(e,t){var n=k(e)[t];return n&&n.participants.sort((function(e,t){return"Organizer"===e.role?-1:"Participant"===t.role?1:0})),n||new A},P=function(e,t){var n=L(e);return(e.pagination.followUpsByChat[t]||{ids:[]}).ids.map((function(e){return n[e]}))},I=function(e){return e.pagination},R=function(e,t){var n=I(e).chatsByFilter[t];return!!n&&(null===n||void 0===n?void 0:n.isFetching)},D=function(e,t){var n=I(e).chatsByFilter[t];return{ids:(null===n||void 0===n?void 0:n.ids)||[],next:null===n||void 0===n?void 0:n.next}},x="CALL_API",M=function(e){return function(t){return function(n){if(n.type===x){var r=n.payload.endpoint,o=n.payload,i=o.schema,c=o.types,l=o.method,s=o.payload,u=o.meta;if("function"===typeof r&&(r=r(e.getState())),"string"!==typeof r)throw new Error("Specify a string endpoint URL.");if(!Array.isArray(c)||3!==c.length)throw new Error("Expected an array of three action types.");if(!c.every((function(e){return"string"===typeof e})))throw new Error("Expected action types to be strings.");var d=Object(h.a)(c,3),m=d[0],f=d[1],E=d[2];return t({type:m,payload:{meta:u}}),function(e,t,n,a){var r=-1===e.indexOf("/api/")?"/api/"+e:e,o=JSON.stringify(Object(b.decamelizeKeys)(n)),i={"Content-Type":"application/json"};switch(a&&(i.Authorization="Token ".concat(a)),t){case"POST":case"PUT":case"DELETE":return fetch(r,{method:t,body:o,headers:i}).then(function(){var e=Object(g.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}return e.abrupt("return",Promise.reject(t));case 2:if(n={},204===t.status){e.next=6;break}return e.next=6,t.json().then((function(e){n=Object(b.camelizeKeys)(e)})).catch();case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());default:return fetch(r,{headers:i}).then((function(e){return e.json().then((function(t){return e.ok?Object(b.camelizeKeys)(t):Promise.reject(e)}))}))}}(r,l,s,a.getToken(e.getState())).then((function(e){var n=e.results?Object(p.a)({},u,{count:e.count,next:e.next,previous:e.previous}):u;return t({payload:{result:e.results||e,responseSchema:i,meta:n},type:f})}),(function(e){return t({type:E,payload:{message:e.message||"An error occurred.",status:e.status,meta:u}})}))}return t(n)}}},B=new E.b.Entity("users",{},{idAttribute:function(e){return e.id.toString()},processStrategy:function(e){return new U(e)},mergeStrategy:function(e){return e}}),H=new E.b.Entity("chats",{participants:[{user:B}]},{idAttribute:function(e){return e.id.toString()},processStrategy:function(e){return new A(e)}}),G=new E.b.Entity("followUps",{pennyChat:H,user:B},{idAttribute:function(e){return e.id.toString()}}),W={CHAT:H,CHAT_ARRAY:[H],USER:B,USER_ARRAY:[B],FOLLOW_UP:G,FOLLOW_UP_ARRAY:[G]},Y={Profile:"/profile/:id",Chats:"/chats",ChatDetail:"/chats/:id",Home:"/",VerifyEmail:"/verify"},z={user:"auth/user/",userProfile:"users/profile/",login:"auth/login/",register:"auth/register/",logout:"auth/logout/",exists:"auth/exists/",chats:"chats/",chatDetail:function(e){return"chats/".concat(e,"/")},userChats:function(e){return"chats/?participants__user_id=".concat(e)},resendEmail:"auth/verification-email/",verifyEmail:"auth/verify/"},V="CHATS_LIST_REQUEST",Q="CHATS_LIST_SUCCESS",q="CHATS_LIST_FAILURE",K="CHAT_DETAIL_REQUEST",X="CHAT_DETAIL_SUCCESS",J="CHAT_DETAIL_FAILURE",Z="FOLLOW_UPS_REQUEST",$="FOLLOW_UPS_SUCCESS",ee="FOLLOW_UPS_FAILURE",te="CREATE_FOLLOW_UP_REQUEST",ne="CREATE_FOLLOW_UP_SUCCESS",ae="CREATE_FOLLOW_UP_FAILURE",re="UPDATE_FOLLOW_UP_REQUEST",oe="UPDATE_FOLLOW_UP_SUCCESS",ie="UPDATE_FOLLOW_UP_FAILURE",ce="CLEAR_ERROR_MESSAGE",le=function(e,t){return{type:x,payload:{types:[V,Q,q],endpoint:e,schema:W.CHAT_ARRAY,meta:{userID:t}}}},se="LOGOUT_USER",ue="BOOTSTRAP",de="SET_TOKEN",me="FETCH_USER_REQUEST",pe="FETCH_USER_SUCCESS",fe="FETCH_USER_FAILURE",Ee="LOGIN_REQUEST",he="LOGIN_SUCCESS",ve="LOGIN_FAILURE",ye="SIGNUP_REQUEST",ge="SIGNUP_SUCCESS",be="SIGNUP_FAILURE",Oe="LOGOUT_REQUEST",Se="LOGOUT_SUCCESS",Ue="LOGOUT_FAILURE",Ne="USER_EXISTS_REQUEST",Ce="USER_EXISTS_SUCCESS",_e="USER_EXISTS_FAILURE",we="RESEND_VERIFY_EMAIL_REQUEST",ke="RESEND_VERIFY_EMAIL_SUCCESS",Le="RESEND_VERIFY_EMAIL_FAILURE",je="VERIFY_EMAIL_REQUEST",Te="VERIFY_EMAIL_SUCCESS",Ae="VERIFY_EMAIL_FAILURE",Fe=function(e){return{type:de,payload:e}},Pe=function(){return{type:x,payload:{types:[me,pe,fe],endpoint:z.user,method:"GET"}}},Ie=function(e){return{type:x,payload:{types:[Ee,he,ve],endpoint:z.login,method:"POST",payload:e}}},Re=function(){return{type:se}},De=n(24),xe=n(49),Me={chatsByFilter:{all:{isFetching:!1,next:"",previous:"",count:0,ids:[]}},followUpsByChat:{}},Be=function(e,t){return Object(xe.a)(new Set([].concat(Object(xe.a)(e),Object(xe.a)(t))))},He=function(e){var t=e.types,n=e.mapActionToKey;if(!Array.isArray(t)||3!==t.length)throw new Error("Expected types to be an array of three elements.");if(!t.every((function(e){return Array.isArray(e)})))throw new Error("Expected types to be strings.");if("function"!==typeof n)throw new Error("Expected mapActionToKey to be a function.");var a=Object(h.a)(t,3),r=a[0],o=a[1],i=a[2],c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,next:void 0,previous:void 0,count:0,ids:Array()},t=arguments.length>1?arguments[1]:void 0,n=t.payload||{},a=n.result,c=n.responseSchema;if(r.includes(t.type))return Object(p.a)({},e,{isFetching:!0});if(o.includes(t.type)){if(c){var l,s,u,d=Object(E.a)(a,c),m=d.result;return"string"===typeof m&&(m=[m]),Object(p.a)({},e,{isFetching:!1,ids:Be(e.ids,m),next:null===(l=t.payload)||void 0===l?void 0:l.meta.next,previous:null===(s=t.payload)||void 0===s?void 0:s.meta.previous,count:null===(u=t.payload)||void 0===u?void 0:u.meta.count})}}else if(i.includes(t.type))return Object(p.a)({},e,{isFetching:!1});return e};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0,a=n(t);return a?Object(p.a)({},e,Object(De.a)({},a,c(e[a],t))):e}},Ge={token:null,user:null},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0,n=Object(p.a)({},e),a=t.payload,r=t.type;switch(r){case de:n.token=a;break;case pe:n.user=new U(t.payload.result);break;case Se:n.token=null,n.user=null}return n},Ye=n(96),ze=function(e){return function(t){return function(n){e.getState();return t(n)}}},Ve="token",Qe="user",qe=function(){var e=function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},t=function(e,t,n){var a="";if(n){var r=new Date;r.setTime(r.getTime()+60*n*1e3),a="; expires=".concat(r.toUTCString())}document.cookie="".concat(e,"=").concat(t||"").concat(a,"; path=/")},n=function(e){document.cookie="".concat(e,"=; Max-Age=-99999999; path=/")},a=function(){return n(Ve)},r=function(){return n(Qe)};return{setToken:function(e){return t(Ve,e,40320)},getToken:function(){return e(Ve)},deleteToken:a,setUser:function(e){return t(Qe,e,40320)},getUser:function(){return e(Qe)},deleteUser:r,clearCookies:function(){r(),a()}}}(),Ke="AUTH_EMAIL",Xe="AUTH_PASSWORD",Je="AUTH_SIGNUP",Ze="VERIFY_EMAIL",$e={CLOSE_MODAL:"CLOSE_MODAL",OPEN_MODAL:"OPEN_MODAL"},et=function(){var e=null,t=function(t){return function(){e&&e(t.apply(void 0,arguments))}},n=function(e){return{type:$e.OPEN_MODAL,payload:e}};return{mount:function(t){e=t},unmount:function(){e=null},auth:t((function(){return n({name:Ke})})),authSignup:t((function(e){return n({name:Je,props:{email:e}})})),authPassword:t((function(e){return n({name:Xe,props:{email:e}})})),verifyEmail:t((function(e){return n({name:Ze,props:{email:e}})})),close:t((function(){return{type:$e.CLOSE_MODAL,payload:null}}))}}(),tt=function(e){qe.clearCookies(),e({type:x,payload:{types:[Oe,Se,Ue],endpoint:z.logout,method:"POST"}})},nt=function(e){return function(t){return function(n){switch(n.type){case se:tt(e.dispatch);break;case ue:!function(e){var t=qe.getToken();t&&(e(Fe(t)),e(Pe()))}(e.dispatch),e.dispatch(le(z.chats));break;case ge:et.verifyEmail(n.payload.meta.email);break;case he:qe.setToken(n.payload.result.key),e.dispatch(Fe(n.payload.result.key)),e.dispatch(Pe()),et.close();break;case pe:var a=n.payload.result.pk.toString();e.dispatch(le(z.userChats(a),a));break;case Ce:et.authPassword(n.payload.meta.email);break;case _e:403===n.payload.status&&et.verifyEmail(n.payload.meta.email),et.authSignup(n.payload.meta.email);break;case Te:et.auth()}return t(n)}}},at=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d,rt=[q,J,ee,ae,ie,fe,ve,be,Ue,_e,Le,Ae],ot=Object(f.c)({chatsByFilter:He({mapActionToKey:function(e){var t,n;return(null===e||void 0===e||null===(t=e.payload)||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.userID)||"all"},types:[[V],[Q],[q]]}),followUpsByChat:He({mapActionToKey:function(e){var t,n;return null===e||void 0===e||null===(t=e.payload)||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.chatID},types:[[Z],[$,ne],[ee]]})}),it={user:Ge,entities:{chats:{},followUps:{},users:{}},pagination:Me,error:{status:NaN,message:""}},ct=Object(f.c)({entities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{chats:{},followUps:{},users:{}},t=arguments.length>1?arguments[1]:void 0,n=t.payload||{},a=n.result,r=n.responseSchema;if(a&&r){var o=Object(E.a)(a,r),i=o.entities,c=(i=void 0===i?{}:i).chats,l=void 0===c?{}:c,s=i.users,u=void 0===s?{}:s,d=i.followUps,m=void 0===d?{}:d;return{chats:Object(p.a)({},e.chats,{},l),users:Object(p.a)({},e.users,{},u),followUps:Object(p.a)({},e.followUps,{},m)}}return e},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:NaN,message:""},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return n===ce?{status:NaN,message:""}:rt.includes(t.type)?a:e},pagination:ot,user:We}),lt=Object(f.e)(ct,it,at(Object(f.a)(Ye.a,M,nt,ze))),st=(n(117),n(28)),ut=n(276),dt=n(277),mt=n(263),pt=n(264),ft=n(265),Et=n(97),ht=n(259),vt=n(260),yt=n(261),gt=n(262),bt=function(e){var t=e.type,n=e.name,a=e.id,r=e.placeholder,o=e.onChange,i=e.label,c=e.value,s=e.required,u=e.helperText;return l.a.createElement(ht.a,null,l.a.createElement(vt.a,{for:a},i),l.a.createElement(yt.a,{type:t,name:n,id:a,placeholder:r,className:"form-control",onChange:function(e){e.persist(),o(e.target.value)},value:c,required:s}),u?l.a.createElement(gt.a,{color:"muted"},u):null)};bt.defaultProps={placeholder:"",required:!1,helperText:""};var Ot,St=bt,Ut=Object(m.b)((function(){return{}}),(function(e){return{userExists:function(t){return e(function(e){return{type:x,payload:{types:[Ne,Ce,_e],endpoint:z.exists,method:"POST",payload:{email:e},meta:{email:e}}}}(t))}}}))((function(e){var t=e.userExists,n=Object(c.useState)(""),a=Object(h.a)(n,2),r=a[0],o=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(mt.a,{toggle:et.close},"Sign up or log in"),l.a.createElement(pt.a,null,l.a.createElement(ft.a,{onSubmit:function(e){return e.preventDefault(),t(r),!1}},l.a.createElement(St,{label:"Email",type:"email",name:"email",id:"email",placeholder:"",required:!0,onChange:o,value:r}),l.a.createElement("div",{className:"text-center"},l.a.createElement(Et.a,null,"Let\u2019s Go")))))})),Nt=Object(m.b)((function(){return{}}),(function(e){return{login:function(t){return e(function(e){return function(){var t=Object(g.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n(Ie(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.email,n=e.login,a=Object(c.useState)(""),r=Object(h.a)(a,2),o=r[0],i=r[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(mt.a,{toggle:et.close},"Welcome back!"),l.a.createElement(pt.a,null,l.a.createElement(ft.a,{onSubmit:function(e){e.preventDefault(),n({email:t,password:o})}},l.a.createElement(St,{label:"Password",type:"password",name:"password",id:"password",placeholder:"",onChange:i,value:o,required:!0}),l.a.createElement("div",{className:"text-center"},l.a.createElement(Et.a,null,"Let\u2019s Go")))))})),Ct=Object(m.b)((function(){return{}}),(function(e){return{signup:function(t){return e(function(e){return{type:x,payload:{types:[ye,ge,be],endpoint:z.register,method:"POST",payload:e,meta:{email:e.email}}}}(t))}}}))((function(e){var t=e.signup,n=e.email,a=Object(c.useState)(""),r=Object(h.a)(a,2),o=r[0],i=r[1],s=Object(c.useState)(""),u=Object(h.a)(s,2),d=u[0],m=u[1],p=Object(c.useState)(""),f=Object(h.a)(p,2),E=f[0],v=f[1],y=Object(c.useState)(n),g=Object(h.a)(y,2),b=g[0],O=g[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(mt.a,{toggle:et.close},"Looks like you're new. Fill out this form to create an account."),l.a.createElement(pt.a,null,l.a.createElement(ft.a,{onSubmit:function(e){e.preventDefault(),t({password:E,firstName:o,lastName:d,email:b})}},l.a.createElement(St,{label:"First Name",type:"text",name:"firstName",id:"firstName",placeholder:"",onChange:i,value:o,required:!0}),l.a.createElement(St,{label:"Last Name",type:"text",name:"lastName",id:"lastName",placeholder:"",onChange:m,value:d,required:!0}),l.a.createElement(St,{label:"Email",type:"email",name:"email",id:"email",placeholder:"",onChange:O,value:b,helperText:"If you are part of the Penny U Slack, use the same email as that slack account."}),l.a.createElement(St,{label:"Password",type:"password",name:"password",id:"password",placeholder:"",onChange:v,value:E,required:!0}),l.a.createElement("div",{className:"text-center"},l.a.createElement(Et.a,null,"Let\u2019s Go")))))})),_t=Object(m.b)((function(){return{}}),(function(e){return{resendVerifyEmail:function(t){return e(function(e){return{type:x,payload:{types:[we,ke,Le],endpoint:z.resendEmail,payload:{email:e},method:"POST"}}}(t))}}}))((function(e){var t=e.email,n=e.resendVerifyEmail;return l.a.createElement(l.a.Fragment,null,l.a.createElement(mt.a,{toggle:et.close},"Sign up or log in"),l.a.createElement(pt.a,null,l.a.createElement("div",{className:"text-center"},l.a.createElement("p",null,t," needs to be verified."),l.a.createElement("p",null,"Check your email for a verification link."),l.a.createElement(Et.a,{onClick:function(){return n(t)}},"Resend Verification email"))))})),wt={name:null,open:!1};function kt(e,t){var n=t.type,a=t.payload;switch(n){case $e.CLOSE_MODAL:return{open:!1,name:null,props:{}};case $e.OPEN_MODAL:return{open:!0,name:a.name,props:a.props||{}};default:return e}}var Lt=(Ot={},Object(De.a)(Ot,Ke,Ut),Object(De.a)(Ot,Xe,Nt),Object(De.a)(Ot,Je,Ct),Object(De.a)(Ot,Ze,_t),Ot),jt=function(){var e=Object(c.useReducer)(kt,wt,(function(e){return e})),t=Object(h.a)(e,2),n=t[0],a=t[1];Object(c.useEffect)((function(){return et.mount(a),et.unmount}));var r=n.open,o=n.props,i=n.name,s=i?Lt[i]:null;return l.a.createElement(dt.a,{isOpen:r,toggle:et.close},s?l.a.createElement(s,o):null)},Tt=n(266),At=n(267),Ft=n(46),Pt=n(25),It=n(98),Rt=n.n(It);n(127);var Dt=function(e){var t=e.className,n=e.size,a=e.onClick,r=e.title,o=e.detail,i=e.icon,c=e.color,s=e.id,u=e.testID,d=r&&o?"".concat(r," ").concat(o):r||o;return l.a.createElement(Et.a,{size:n,color:c,onClick:a,className:Rt()(t,"edit-button"),id:s,"data-testid":u},l.a.createElement(Ft.a,{icon:i}),d)};Dt.defaultProps={size:"md",color:"primary",detail:"",className:"",title:"",onClick:null,id:"",testID:null};var xt=function(e){var t=e.className,n=e.onClick,a=e.type;return l.a.createElement(Dt,{color:"secondary",className:t,onClick:n,detail:a,title:"Cancel",icon:Pt.f})};xt.defaultProps={className:""};var Mt=function(e){var t=e.className,n=e.type,a=e.onClick;return l.a.createElement(Dt,{onClick:a,className:t,detail:n,title:"Add New",icon:Pt.d})};Mt.defaultProps={className:""};var Bt=function(e){var t=e.className,n=e.onClick,a=e.type,r=e.color;return l.a.createElement(Dt,{detail:a,title:"Edit",className:t,onClick:n,icon:Pt.c,color:r})};Bt.defaultProps={className:"",color:"primary"};var Ht=function(e){var t=e.className,n=e.count;return l.a.createElement(Dt,{color:"red",className:t,detail:n.toString(),icon:Pt.b})};Ht.defaultProps={className:""};var Gt=function(e){var t=e.className,n=e.type,a=e.onClick;return l.a.createElement(Dt,{className:t,onClick:a,icon:Pt.e,title:"Save",detail:n})};Gt.defaultProps={className:""};var Wt=function(e){var t=e.className,n=e.onClick,a=e.id,r=e.testID;return l.a.createElement(Dt,{className:t,onClick:n,icon:Pt.a,id:a,color:"link",testID:r})};Wt.defaultProps={className:"",onClick:function(){}};var Yt=function(e){var t=e.header,n=e.options,a=e.id,r=e.testID;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Wt,{id:a,testID:r}),l.a.createElement(Tt.a,{trigger:"legacy",placement:"bottom",target:a},l.a.createElement(At.a,null,t),n))},zt=n(268),Vt=n(269),Qt=n(270),qt=n(278),Kt=n(271),Xt=function(e){var t=e.user,n=e.logout,a=Object(c.useState)(!1),r=Object(h.a)(a,2),o=r[0],i=r[1];return l.a.createElement(zt.a,{className:"h2 bg-white shadow-sm",light:!0,sticky:"top"},l.a.createElement(Vt.a,{href:"/"},"Penny University"),t.valid?l.a.createElement(Qt.a,{isOpen:o,toggle:function(){return i((function(e){return!e}))}},l.a.createElement(qt.a,{caret:!0},"Hi, ".concat(t.displayName,"!")),l.a.createElement(Kt.a,null,l.a.createElement("div",null,l.a.createElement(d.b,{to:Y.Profile.replace(":id",t.id.toString()),className:"btn btn-link"},"Profile")),l.a.createElement("div",null,l.a.createElement(Et.a,{onClick:n,color:"link"},"Logout")))):l.a.createElement(Et.a,{onClick:et.auth},"Login"))},Jt=n(272),Zt=Object(m.b)((function(e){var t=e.error;return{error:null===t||void 0===t?void 0:t.message}}),(function(e){return{dismiss:function(){return e({type:ce})}}}))((function(e){var t=e.error,n=e.dismiss,a=Object(c.useState)(!0),r=Object(h.a)(a,2),o=r[0],i=r[1];return t?l.a.createElement("div",{className:"alert-container"},l.a.createElement(Jt.a,{color:"danger",isOpen:o,toggle:function(){i(!1),n()}},t)):null})),$t=n(273),en=n(101),tn=n.n(en),nn=function(e){var t=e.date,n=e.className;return l.a.createElement("p",{className:n},l.a.createElement("strong",null,tn()(t).format("M/D/YYYY")))},an=n(102),rn=n.n(an),on=function(e){var t=e.content,n=e.className;return l.a.createElement(rn.a,{className:n,source:t})};on.defaultProps={bordered:!1};var cn=on,ln=n(103),sn=n.n(ln),un=n(104),dn=(n(242),new un.Converter({tables:!0,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0})),mn=function(e){var t=e.content,n=e.onChange,a=Object(c.useState)("write"),r=Object(h.a)(a,2),o=r[0],i=r[1];return l.a.createElement(sn.a,{value:t,onChange:n,selectedTab:o,onTabChange:i,generateMarkdownPreview:function(e){return Promise.resolve(dn.makeHtml(e))}})},pn=function(e){var t=e.date,n=e.user,a=e.role;return l.a.createElement("div",{className:"d-flex"},l.a.createElement("div",{className:"bg-secondary mr-2 icon__user"},l.a.createElement(Ft.a,{color:"white",size:"lg",icon:Pt.g})),l.a.createElement("div",null,l.a.createElement("h6",null,l.a.createElement(d.b,{to:Y.Profile.replace(":id",n.id.toString())},n.displayName),"Organizer"===a?" - ".concat(a):""),l.a.createElement(nn,{className:"text-secondary",date:t})))},fn="followup-submenu",En=function(e){var t=e.editOnPress,n=e.saveOnPress,a=e.editMode,r=e.id;return a?l.a.createElement(Gt,{className:"align-self-start",type:"Changes",onClick:n}):l.a.createElement(Yt,{id:"followup-dropdown-".concat(r),header:"Options",testID:fn,options:[l.a.createElement(Bt,{className:"align-self-start",type:"Follow Up",onClick:t,key:"edit-followup-".concat(r),color:"link"})]})},hn=function(e){var t=e.followUp,n=e.updateFollowUp,a=e.canEdit,r=e.user,o=e.role,i=Object(c.useState)(!1),s=Object(h.a)(i,2),u=s[0],d=s[1],m=Object(c.useState)(t.content),f=Object(h.a)(m,2),E=f[0],v=f[1];return l.a.createElement("div",{className:"pt-2"},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement(pn,{user:r,date:t.date,role:o}),a?l.a.createElement(En,{id:t.id,editMode:u,saveOnPress:function(){var e=Object(p.a)({},t);e.content=E,n(e),d(!1)},editOnPress:function(){return d(!0)}}):null),u?l.a.createElement(mn,{content:E,onChange:v}):l.a.createElement(cn,{className:"ml-4 border-left pl-3",content:E}))};n(243);var vn=function(e){var t=e.chat,n=e.followUps,a=e.createFollowUp,r=e.updateFollowUp,o=e.user,i=e.getUserByID,s=Object(c.useState)(!1),u=Object(h.a)(s,2),d=u[0],m=u[1],p=Object(c.useState)(""),f=Object(h.a)(p,2),E=f[0],v=f[1],y=function(){o.valid?Promise.resolve(m(!0)).then((function(){return window.scrollTo(0,document.body.scrollHeight)})):et.auth()};return Object(c.useEffect)((function(){window.scrollTo(0,0)}),[]),t.valid?l.a.createElement($t.a,{body:!0,className:"mb-3 border-0 shadow-sm"},l.a.createElement("div",{className:"chat-detail-header"},l.a.createElement("h3",{className:"mr-3"},t.title)),l.a.createElement(nn,{className:"text-secondary",date:t.date}),t.description?l.a.createElement(cn,{className:"mb-4",content:t.description}):null,l.a.createElement("div",{className:"mb-4"},l.a.createElement(Ht,{className:"mr-2",count:n.length}),l.a.createElement(Mt,{type:"Follow Up",onClick:y})),l.a.createElement("h5",{className:"mb-3"},n.length," ","Follow Ups"),n.map((function(e){var n=i(e.user),a=t.getUserRole(e.user);return l.a.createElement(hn,{key:"FollowUpCard-".concat(e.id),followUp:e,updateFollowUp:r,user:n,role:a,canEdit:(null===o||void 0===o?void 0:o.id)===(null===n||void 0===n?void 0:n.id)})})),l.a.createElement("hr",null),d?l.a.createElement("div",null,l.a.createElement("h5",null,"Add New Follow Up:"),l.a.createElement(mn,{content:E,onChange:v}),l.a.createElement("div",{className:"mt-2"},l.a.createElement(Gt,{type:"Follow Up",onClick:function(){a(t.id,{content:E}),m(!1)}}),l.a.createElement(xt,{className:"ml-2",onClick:function(){return m(!1)}}))):l.a.createElement(Mt,{type:"Follow Up",onClick:y})):l.a.createElement("h1",null,"Loading...")},yn=n(275),gn=n(69),bn=n(274),On=Object(m.b)((function(e){return{getUserByID:function(t){return r.getUserByID(e,t)}}}))((function(e){var t=e.className,n=e.participants,a=e.chatID,r=e.getUserByID,o=Object(c.useState)(!1),i=Object(h.a)(o,2),s=i[0],u=i[1];return l.a.createElement("div",{className:"".concat(t," d-inline-flex")},l.a.createElement(d.b,{to:"/chats/".concat(a),id:"ParticipantsPopover".concat(a),onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)}},n.length," ",n.length>1?"Participants":"Participant"),l.a.createElement(gn.a,{placement:"right-start",isOpen:s,target:"ParticipantsPopover".concat(a),trigger:"hover"},l.a.createElement(At.a,null,"Participants"),l.a.createElement(bn.a,null,n.slice(0,5).map((function(e){return l.a.createElement("p",{key:e.user,className:"mb-0"},r(e.user).displayName,"Organizer"===e.role?" - ".concat(e.role):"")})),n.length>5?l.a.createElement("p",{className:"mb-0"},"and"," ",n.length-5," ","others"):null)))})),Sn=function(e){var t=e.chat;return t?l.a.createElement($t.a,{body:!0,className:"mb-3 border-0 shadow-sm"},l.a.createElement(yn.a,{tag:"h5"},l.a.createElement(d.b,{className:"text-reset",to:"/chats/".concat(t.id)},t.title)),l.a.createElement(nn,{className:"text-secondary",date:t.date}),t.description?l.a.createElement(cn,{content:t.description}):null,l.a.createElement("div",{className:"d-flex"},l.a.createElement(On,{className:"mr-2",participants:t.participants,chatID:t.id}),"-",l.a.createElement(d.b,{className:"ml-2",to:"/chats/".concat(t.id)},"Follow Ups"))):null},Un=n(105),Nn=n.n(Un),Cn=Object(st.g)(Object(m.b)((function(e,t){var n=i.getChatsPagination(e,t.filter.key),a=n.next;return{chats:n.ids,nextPageUrl:a,getChatByID:function(t){return o.getChatByID(e,t)},isFetching:i.isFetchingChats(e,t.filter.key)}}),(function(e){return{loadChatsList:function(t,n){return e(le(t,n))}}}))((function(e){var t=e.chats,n=e.getChatByID,a=e.nextPageUrl,r=e.isFetching,o=e.loadChatsList,i=e.filter;return l.a.createElement("div",null,l.a.createElement(Nn.a,{pageStart:1,loadMore:function(){r||o(a,i.key)},hasMore:!!a&&!r,loader:l.a.createElement("div",{className:"loader",key:0},"Loading ..."),threshold:200},t.map((function(e){return l.a.createElement(Sn,{chat:n(e),key:"ChatCard-".concat(e)})}))))}))),_n=(Object(m.b)((function(e){return{user:a.getUser(e)}}))((function(e){var t=e.component,n=e.user,a=e.path,r=e.exact,o=qe.getToken();return n.valid||o?l.a.createElement(st.b,{exact:r,path:a,component:t}):l.a.createElement(st.a,{to:Y.Home})})),function(){return l.a.createElement(Cn,{filter:{key:"all",query:""}})}),wn=Object(st.g)(Object(m.b)((function(e,t){var n=t.match.params.id;return{id:n,chat:o.getChatByID(e,n),followUpsList:o.getFollowupsForChatID(e,n),user:a.getUser(e),getUserByID:function(t){return r.getUserByID(e,t)}}}),(function(e){return{loadChatDetail:function(t){return e((n=t,{type:x,payload:{types:[K,X,J],endpoint:z.chatDetail(n),schema:W.CHAT}}));var n},loadFollowUps:function(t,n){return e(function(e,t){return{type:x,payload:{meta:{chatID:e},types:[Z,$,ee],endpoint:t||"chats/".concat(e,"/follow-ups/"),schema:W.FOLLOW_UP_ARRAY}}}(t,n))},createFollowUp:function(t,n){return e(function(e,t){return{type:x,payload:{types:[te,ne,ae],endpoint:"chats/".concat(e,"/follow-ups/"),schema:W.FOLLOW_UP,method:"POST",payload:t,meta:{chatID:e}}}}(t,n))},updateFollowUp:function(t){return e(function(e){return{type:x,payload:{types:[re,oe,ie],endpoint:"follow-ups/".concat(e.id,"/"),schema:W.FOLLOW_UP,method:"PUT",payload:e}}}(t))}}}))((function(e){var t=e.id,n=e.chat,a=e.followUpsList,r=e.loadChatDetail,o=e.loadFollowUps,i=e.createFollowUp,s=e.updateFollowUp,u=e.user,d=e.getUserByID;return Object(c.useEffect)((function(){r(t),o(t)}),[t,r,o]),l.a.createElement(vn,{chat:n,followUps:a,createFollowUp:i,updateFollowUp:s,user:u,getUserByID:d})}))),kn=Object(m.b)((function(e,t){return{me:a.getUser(e),user:r.getUserByID(e,t.match.params.id)}}),(function(e){return{loadChatsList:function(t,n){return e(le(t,n))}}}))((function(e){var t=e.loadChatsList,n=e.match,a=e.me,r=e.user,o=n.params.id;Object(c.useEffect)((function(){t(z.userChats(o),o)}),[t]);var i=(null===r||void 0===r?void 0:r.id)===(null===a||void 0===a?void 0:a.id)?"My ":"".concat(null===r||void 0===r?void 0:r.displayName,"'s");return l.a.createElement("div",null,l.a.createElement("h1",null,"".concat(i," Chats")),l.a.createElement(Cn,{filter:{key:o,query:"participants__user_id=".concat(o)}}))})),Ln=n(106),jn=n.n(Ln),Tn=Object(m.b)((function(e){var t=e.error;return{error:null===t||void 0===t?void 0:t.message}}),(function(e){return{verify:function(t){return e(function(e){return{type:x,payload:{types:[je,Te,Ae],endpoint:z.verifyEmail,payload:e,method:"POST"}}}(t))}}}))((function(e){var t=e.verify,n=e.location,a=e.error,r=jn.a.parse(n.search);Object(c.useEffect)((function(){"string"===typeof(null===r||void 0===r?void 0:r.token)&&"string"===typeof(null===r||void 0===r?void 0:r.email)&&t({token:null===r||void 0===r?void 0:r.token,email:null===r||void 0===r?void 0:r.email})}),[t]);var o=a?"There was an issue verifying your email \ud83d\ude1e":"Thanks for verifying your email \ud83d\ude42";return l.a.createElement("div",null,l.a.createElement("h1",{className:"text-center"},o))})),An=Object(m.b)((function(e){return{user:a.getUser(e)}}),(function(e){return{dispatchBootstrap:function(){return e({type:ue})},dispatchLogout:function(){return e(Re())}}}))((function(e){var t=e.dispatchBootstrap,n=e.user,a=e.dispatchLogout;return Object(c.useEffect)((function(){t()}),[t]),l.a.createElement(l.a.Fragment,null,l.a.createElement(Xt,{user:n,logout:a}),l.a.createElement(ut.a,{className:"mt-3"},l.a.createElement(st.d,null,l.a.createElement(st.b,{path:Y.ChatDetail,component:wn}),l.a.createElement(st.b,{path:Y.Chats,component:_n}),l.a.createElement(st.b,{path:Y.VerifyEmail,component:Tn}),l.a.createElement(st.b,{path:Y.Profile,component:kn}),l.a.createElement(st.b,{path:Y.Home},l.a.createElement(st.a,{to:Y.Chats}))),l.a.createElement(Zt,null),l.a.createElement(jt,null)))}));u.a.render(l.a.createElement(d.a,null,l.a.createElement(m.a,{store:lt},l.a.createElement(An,null))),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.37d08896.chunk.js.map